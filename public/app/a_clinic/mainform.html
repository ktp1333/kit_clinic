<form id="mainform">
  <style type="text/css">
    .table-fixed-left table,
    .table-fixed-right table {
      border-collapse: collapse;
    }

    .table-fixed-right td,
    .table-fixed-right th,
    .table-fixed-left td,
    .table-fixed-left th {
      border: 1px solid #ddd;
      padding: 5px 5px;
    }

    .table-fixed-left {
      width: 200px;
      float: left;
      position: fixed;
      overflow-x: hidden;
      white-space: nowrap;
      text-align: left;
      border: 1px solid #ddd;
      z-index: 2;
    }

    .table-fixed-right {
      width: calc(100% - 225px);
      right: 15px;
      position: fixed;
      overflow-x: scroll;
      border: 1px solid #ddd;
      white-space: nowrap;
    }

    .table-fixed-right td,
    .table-fixed-right th {
      padding: 5px 10px;
    }
  </style>



  <div ng-cloak class="tabsdemoDynamicHeight ">

    <md-content>
      <md-tabs md-dynamic-height md-border-bottom>
        <!-- page 2 -->
        <md-tab label="Register">
          <md-content class="md-padding" layout-xs="column" layout="row" style="height:90vH;">
            <!-- left -->
            <div flex-xs flex-gt-xs="35" layout="column">
              <!-- box left 1 menu-->
              <md-card>
                <div class="marginleft15 fonts fontbg7">HN:</div>
                <md-card-content>
                  <md-input-container>

                    <div flex layout="column">

                      <div>
                        <input type="text" class="form-control width25vW" ng-model="vm.msearch"
                          placeholder="search here" value="">
                      </div>
                      <div flex layout="row" class="">
                        <button type="text" class="btn btn-primary" ng-click="searchHN(vm.msearch)"
                          data-placement="bottom" title="HN" onmouseenter="$(this).tooltip('show')">
                          <!-- <span class="glyphicon glyphicon-search"></span> -->search
                        </button>
                      </div>
                    </div>
                  </md-input-container>
                </md-card-content>

              </md-card>
            </div>
            <!-- right -->
            <div flex-xs flex-gt-xs="65" layout="column" ng-if="show_searchright">
              <!-- box right 2  show case -->
              <md-card>
                <md-card-content>
                  <div class="panel-heading  ">

                    <div class="well well-lg fontbg9">
                      <H4>Name: {{findpt.title}} {{findpt.name}} {{findpt.surname}}</H4>
                    </div>
                    <div class=" fontnm">Address: {{findpt.address}} {{findpt.district}} {{findpt.amphoe}}
                      {{findpt.province}} {{findpt.zipcode}} </div>
                    <div class=" fontnm">Email: {{findpt.email}} </div>
                    <div class=" fontnm">NationalID: {{findpt.nationalID}} </div>

                  </div>
                  <div flex layout="row" style="justify-content: center;">
                    <button type="text" class="btn btn-primary" ng-click="print()" data-placement="bottom" title="print"
                      onmouseenter="$(this).tooltip('show')">
                      <span class="glyphicon glyphicon-print"></span>
                    </button>
                  </div>
                </md-card-content>

              </md-card>

            </div>
            <div flex-xs flex-gt-xs="65" layout="column" ng-if="show_searchright==false">
              <md-card ng-if="show_waiting_img">
                <md-card-content>
                  <div style="height:80%;" flex layout="column">
                    <div class="align-c">

                      <div class="alert alert-warning">
                        <strong>no case estimate (only package found)</strong>
                      </div>
                    </div>
                    <div>{{note_text}}</div>
                  </div>
                </md-card-content>

              </md-card>
            </div>
          </md-content>
        </md-tab>
        <!-- page 1 -->
        <md-tab label="ลงทะเบียน ผู้ป่วยใหม่" ng-click="new_p1()">
          <!-- <md-content class="md-padding" style="height:90vH;"> -->
          <md-content class="md-padding" layout-xs="column" layout="row" style="height:90vH;">

            <div flex-xs flex-gt-xs="100" layout="column">
              <!-- input form -->
              <md-card>

                <md-card-content>
                  <div ng-if="show_p1==false" class="align-c fontxxl fontr5"> {{lbl_note}}</div>
                  <div ng-if="show_p1==true">
                    <div class="fontl fontbg10 fontbold">ลงข้อมูลผู้ป่วยใหม่</div>
                    <form>
                      <div flex-xs flex-gt-xs="100" layout="row">
                        <md-card flex-xs flex-gt-xs="50">
                          <div flex layout="row" class="form-group">
                            <div>
                              <label for="inputtitle">คำนำหน้า</label>
                            </div>
                            <div>
                              <input type="text" class="form-control width15vW" id="inputtitle" placeholder="title"
                                ng-model="vm.keytitle" ng-change="find_title(vm.keytitle)">
                            </div>
                            <div id="matchItem"> </div>
                            <div class="marginleft15" id="stitle"> </div>
                          </div>
                          <div flex layout="row">
                            <div>
                              <label for="inputpatientname">ชื่อ</label>
                              <input type="text" class="form-control width20vW" id="inputpatientname"
                                placeholder="patient name" ng-model="vm.patientname">
                            </div>

                            <div>
                              <label for="inputsurname">นามสกุล</label>
                              <input type="text" class="form-control width25vW" id="inputsurname" placeholder="Sur name"
                                ng-model="vm.surname">
                            </div>
                          </div>
                          <!-- <fieldset class="form-group"> -->
                          <div flex layout="row">
                            <div class="width10vW">เพศ</div>
                            <div class="width15vW">
                              <input style="height: 2em;width: 30%;" type="radio" name="gender" id="gender1"
                                value="male" ng-model="vm.type" checked>
                              <label style="font-size: 1.2em;">
                                ชาย
                              </label>
                            </div>
                            <div class=" width15vW">
                              <input style="height: 2em;width: 30%;" type="radio" name="gender" id="gender2"
                                value="female" ng-model="vm.type">
                              <label style="font-size: 1.2em;">
                                หญิง
                              </label>
                            </div>

                          </div>
                          <!-- </fieldset> -->
                          <div flex layout="row" class="form-group ">
                            <div class="width15vW">
                              <label for="inputnationalID">เลขที่บัตรประชาชน</label>
                              <input type="text" class="form-control" id="inputnationalID" placeholder="nationalID"
                                ng-model="vm.nationalID">
                            </div>
                            <div class="width30vW">
                              <label for="inputphone">เบอร์โทรศัพท์</label>
                              <input type="text" class="form-control" id="inputphone" placeholder="phone"
                                ng-model="vm.phone">
                            </div>
                          </div>
                          <div class="form-group width45vW">
                            <label for="inputEmail">Email</label>
                            <input type="text" class="form-control" id="inputEmail" placeholder="Email"
                              ng-model="vm.Email" ">
                                  </div>
                               </md-card>
                                <md-card flex-xs flex-gt-xs=" 50">
                            <div class="form-group">

                              <div flex layout="row">
                                <div>
                                  <label for="inputaddress">บ้านเลขที่/ถนน</label>
                                  <input type="text" class="form-control width15vW" id="inputaddress"
                                    placeholder="บ้านเลขที่/ถนน" ng-model="vm.road">
                                </div>
                                <div>
                                  <label for="inputaddress">ตำบล/อำเภอ/จังหวัด/รหัสไปรษณีย์</label>
                                  <input type="text" class="form-control width20vW" id="inputaddress"
                                    placeholder="พิมพ์เพื่อเลือกที่อยู่" ng-model="vm.keyaddress"
                                    ng-change="find_address(vm.keyaddress)">
                                </div>
                                <div class="marginleft5w">
                                  <button type="submit" class="btn btn-default width5vW "
                                    ng-click="clearaddress()">clear</button>
                                </div>
                              </div>
                              <div id="matchList"> </div>
                              <div id="saddress"> </div>
                            </div>
                        </md-card>
                      </div>
                      <!-- <div flex layout="row">
                        <div class="width75vW align-c">{{txt_show}}</div> -->
                        <div style="float: right;">
                          <button type=" submit" class="btn btn-primary width10vW"
                            ng-click="save_data(vm.patientname,vm.surname,vm.type,vm.road,vm.Email,vm.nationalID)"
                            ng-show="show_btnsave">บันทึก</button>
                        </div>
                      <!-- </div> -->
                    </form>
                  </div>
                </md-card-content>
              </md-card>
            </div>
            <!-- page 2 show_print -->
            <div ng-if=" p23" flex-xs flex-gt-xs="100" layout="column">
              <!-- box left 1 -->
              <md-card>
                <md-card-content>
                  <div ID='printableArea'>
                    <div>name: {{vm.name}}</div>
                    <div>HN: {{vm.HN}}</div>
                    <div>user name: {{username}}</div>
                    <div>NB: {{vm.NB}}</div>
                    <div>code:{{code}}</div>
                    <div>procedure: {{procedure}}</div>
                    <div>Med&supply: {{vm.mavgmed_sup}}</div>
                    <div>LAB&radio: {{vm.mavglab_radio}}</div>
                    <div>DF: {{vm.mavgdf}}</div>
                    <div>Others: {{vm.mavgothers}}</div>
                    <div>Room: {{vm.mavgroom}}</div>
                    <div>Total: {{vm.mavgmed_sup+vm.mavglab_radio+vm.mavgdf+vm.mavgothers+vm.mavgroom}}</div>
                  </div>
                  <div flex layout="row">

                    <button type="text" class="btn btn-success marginleft15" ng-click="PrintMe()"
                      data-placement="bottom" title="Save data" onmouseenter="$(this).tooltip('show')">
                      <span class="glyphicon glyphicon-print"></span>
                    </button>
                    <button type="text" class="btn btn-success marginleft15" ng-click="closeprint()"
                      data-placement="bottom" title="Save data" onmouseenter="$(this).tooltip('show')">
                      <span class="glyphicon glyphicon-backward"></span>
                    </button>
                  </div>
                </md-card-content>


              </md-card>

            </div>
          </md-content>
        </md-tab>
        <!-- page 2.2 -->
        <md-tab label="ผู้ป่วยเก่า">
          <!-- <md-content class="md-padding" style="height:90vH;"> -->
          <md-content class="md-padding" layout-xs="column" layout="row" style="height:90vH;">
            <!-- page 2.1 left -->

            <div flex-xs flex-gt-xs="35" layout="column">
              <!-- box left 1 -->
              <md-card>
                <md-card-content>


                  <div flex layout="column" style="align-items: center;" class="form-group">
                    <table class="table table-hover width85p ">
                      <tr>
                        <th class="fontgr7 align-c">Category</th>
                        <th class="fontgr7 align-c">estimate cost</th>
                        <th class="fontgr7 align-c"></th>
                      </tr>

                      <tr>
                        <td>med & supply</td>
                        <td>
                          <input type="text" ID="medsup" class="form-control width10vW marginleft15 align-r"
                            ng-model="vm.mavgmed_sup" value="" ng-readonly="edit_number1" />
                        </td>
                        <td>
                          <div class="marginleft15 align-r">บาท</div>
                        </td>

                      </tr>
                      <tr>
                        <td>lab & radio</td>
                        <td>
                          <input type="text" ID="labradio" class="form-control width10vW marginleft15 align-r"
                            ng-model="vm.mavglab_radio" value="" ng-readonly="edit_number2" />
                        </td>
                        <td>
                          <div class="marginleft15 align-r">บาท</div>
                        </td>

                      </tr>
                      <tr>
                        <td>others</td>
                        <td>
                          <input type="text" ID="others" class="form-control width10vW marginleft15 align-r"
                            ng-model="vm.mavgothers" value="" ng-readonly="edit_number4" />
                        </td>
                        <td>
                          <div class="marginleft15 align-r">บาท</div>
                        </td>

                      </tr>
                      <tr>
                        <td>room</td>
                        <td>
                          <input type="text" ID="room" class="form-control width10vW marginleft15 align-r"
                            ng-model="vm.mavgroom" value="" ng-readonly="edit_number5" />



                        </td>
                        <td>
                          <div class="marginleft15 align-r">บาท</div>
                        </td>

                      </tr>
                      <tr>
                        <td>df</td>
                        <td>
                          <input type="text" ID="df" class="form-control width10vW marginleft15 align-r"
                            ng-model="vm.mavgdf" value="" ng-readonly="edit_number3" />

                        </td>
                        <td>
                          <div class="marginleft15 align-r">บาท</div>
                        </td>

                      </tr>
                      <tr class=" fontbg12">
                        <td>Total</td>
                        <td>
                          <input type="text" ID="total"
                            class="form-control width10vW marginleft15 align-r fontnm fontr8" ng-model="mtotal" value=""
                            ng-readonly="edit_number0" />
                        </td>
                        <td>
                          <div class="marginleft15 align-r"> บาท</div>
                        </td>

                      </tr>
                      <tr class=" fontbg12">
                        <td>+/- {{diff_ratep}} %</td>
                        <td>
                          <div class="marginleft15 align-r">({{mtotal1}} - {{mtotal2}})</div>
                        </td>
                        <td>
                          <div class="marginleft15 align-r"> บาท</div>
                        </td>

                      </tr>
                    </table>
                  </div>

                </md-card-content>


              </md-card>

            </div>
            <!-- page 2.2 right -->

            <div flex-xs flex-gt-xs="65" layout="column">
              <!-- box right searchHN-->
              <md-card>
                <md-card-content>
                  <form>
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="inputHN">search HN</label>
                        <input type="text" class="form-control " id="inputHN" placeholder="xx-xx-xxxxxx" ng-model="mhn">
                      </div>
                      <div><Br><button type="submit" class="btn btn-primary" ng-click="search_byHN(mhn)">import</button>
                      </div>
                    </div>


                  </form>

                </md-card-content>

              </md-card>
              <!-- show/input HN banner -->
              <md-card ng-if="show_importhn">
                <md-card-content>
                  <form>
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="inputname">name</label>
                        <input type="text" class="form-control" id="inputname" placeholder="name"
                          ng-model="patientname">
                      </div>
                      <div class="form-group col-md-6">
                        <label for="inputgender">Gender</label>
                        <input type="text" class="form-control" id="inputgender" placeholder="gender" ng-model="gender">
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="HN">HN</label>
                        <input type="text" class="form-control" id="HN" placeholder="HN" ng-model="HN">
                      </div>
                      <div class="form-group col-md-6">
                        <label for="inputdob">Date of Birth</label>
                        <input type="text" class="form-control" id="inputdob" placeholder="Date of Birth"
                          ng-model="thaiDOB">
                      </div>

                    </div>
                  </form>
                </md-card-content>
              </md-card>
              <!-- input form -->
              <md-card>
                <md-card-content>
                  <div class="fontl fontbg10 fontbold">Input data to form</div>
                  <form>
                    <div class="form-group">
                      <label for="inputpatientname">Patient name</label>
                      <input type="text" class="form-control" id="inputpatientname" placeholder="patient name"
                        ng-model="patientname">
                    </div>
                    <div class="form-group">
                      <label for="inputrelativename">Relative name</label>
                      <input type="text" class="form-control" id="inputrelativename" placeholder="Relative name"
                        ng-model="vm.relativename">
                    </div>
                    <div class="form-group">
                      <label for="inputdrname">Doctor name</label>
                      <input type="text" class="form-control" id="inputdrname" placeholder="Doctor name"
                        ng-model="vm.drname">
                    </div>
                    <div class="form-group">
                      <label for="inputprocedure">Procedure</label>
                      <input type="text" class="form-control" id="inputprocedure" placeholder="Procedure"
                        ng-model="vm.procedure">
                    </div>
                    <fieldset class="form-group">
                      <div class="row">
                        <legend class="col-form-label col-sm-2 pt-0">Type</legend>
                        <div class="col-sm-10">
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios1"
                              value="Elective" ng-model="vm.type" checked>
                            <label class="form-check-label" for="gridRadios1">
                              Elective
                            </label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios2"
                              value="Emergency" ng-model="vm.type">
                            <label class="form-check-label" for="gridRadios2">
                              Emergency
                            </label>
                          </div>

                        </div>
                      </div>
                    </fieldset>
                    <div class="form-group col-md-6">
                      <label for="inputloo">length of operation</label>
                      <input type="text" class="form-control" id="inputloo" placeholder="length of operation (hours)"
                        ng-model="vm.loo">
                    </div>
                    <div class="form-group col-md-6">
                      <label for="inputlos">length of stay</label>
                      <input type="text" class="form-control" id="inputlos" placeholder="length of stay (days)"
                        ng-model="vm.los">
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="inputICU">ICU/Semi ICU</label>
                        <input type="text" class="form-control" id="inputICU" placeholder="days" ng-model="vm.ICUlos"
                          ng-change="setitem41(vm.ICUlos,vm.ICUprice)">
                      </div>
                      <div class="form-group col-md-6">
                        <label for="inputICUprice">ICU price</label>
                        <input type="text" class="form-control" id="inputICUprice" placeholder="ICU price"
                          ng-model="vm.ICUprice" ng-change="setitem41(vm.ICUlos,vm.ICUprice)">
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="inputward">Ward</label>
                        <input type="text" class="form-control" id="inputward" placeholder="days" ng-model="vm.wardlos"
                          ng-change="setitem42(vm.wardlos,vm.wardprice)">
                      </div>
                      <div class="form-group col-md-6">
                        <label for="inputwardprice">Ward price</label>
                        <input type="text" class="form-control" id="inputwardprice" placeholder="ward price"
                          ng-model="vm.wardprice" ng-change="setitem42(vm.wardlos,vm.wardprice)">
                      </div>
                    </div>
                    <div class="fontl fontbg10 fontbold">estimate cost of operation</div>
                    <div class="form-row">
                      <div class="col col-md-8">
                        <input type="text" class="form-control" placeholder="item" ng-model="vm.item1">
                      </div>
                      <div class="col col-md-3  ">
                        <input type="text" class="form-control align-r" placeholder="Baht" ng-model="vm.itemprice1">
                      </div>
                      <div class="col col-md-1">
                        <button type="submit" class="btn btn-primary" ng-click="clear_vm(1)">clear</button>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col col-md-8">
                        <input type="text" class="form-control" placeholder="item" ng-model="vm.item2">
                      </div>
                      <div class="col col-md-3">
                        <input type="text" class="form-control align-r" placeholder="Baht" ng-model="vm.itemprice2">
                      </div>
                      <div class="col col-md-1">
                        <button type="submit" class="btn btn-primary" ng-click="clear_vm(2)">clear</button>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col col-md-8">
                        <input type="text" class="form-control" placeholder="item" ng-model="vm.item3">
                      </div>
                      <div class="col col-md-3">
                        <input type="text" class="form-control align-r" placeholder="Baht" ng-model="vm.itemprice3">
                      </div>
                      <div class="col col-md-1">
                        <button type="submit" class="btn btn-primary" ng-click="clear_vm(3)">clear</button>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col col-md-8">
                        <input type="text" class="form-control" placeholder="ICU" ng-model="vm.item41">
                      </div>
                      <div class="col col-md-3">
                        <input type="text" class="form-control align-r" placeholder="Baht" ng-model="vm.itemprice41">
                      </div>
                      <div class="col col-md-1">
                        <button type="submit" class="btn btn-primary" ng-click="clear_vm(41)">clear</button>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col col-md-8">
                        <input type="text" class="form-control" placeholder="ward" ng-model="vm.item42">
                      </div>
                      <div class="col col-md-3">
                        <input type="text" class="form-control align-r" placeholder="Baht" ng-model="vm.itemprice42">
                      </div>
                      <div class="col col-md-1">
                        <button type="submit" class="btn btn-primary" ng-click="clear_vm(42)">clear</button>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col col-md-8">
                        <input type="text" class="form-control" placeholder="item" ng-model="vm.item51">
                      </div>
                      <div class="col col-md-3">
                        <input type="text" class="form-control align-r" placeholder="Baht" ng-model="vm.itemprice51">
                      </div>
                      <div class="col col-md-1">
                        <button type="submit" class="btn btn-primary" ng-click="clear_vm(51)">clear</button>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col col-md-8">
                        <input type="text" class="form-control" placeholder="item" ng-model="vm.item52">
                      </div>
                      <div class="col col-md-3">
                        <input type="text" class="form-control align-r" placeholder="Baht" ng-model="vm.itemprice52">
                      </div>
                      <div class="col col-md-1">
                        <button type="submit" class="btn btn-primary" ng-click="clear_vm(52)">clear</button>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col col-md-8">
                        <input type="text" class="form-control" placeholder="item" ng-model="vm.item53">
                      </div>
                      <div class="col col-md-3">
                        <input type="text" class="form-control align-r" placeholder="Baht" ng-model="vm.itemprice53">
                      </div>
                      <div class="col col-md-1">
                        <button type="submit" class="btn btn-primary" ng-click="clear_vm(53)">clear</button>
                      </div>
                    </div>

                    <Br>

                    <div class="form-group marginleft15">
                      <button type="submit" class="btn btn-primary"
                        ng-click="caltotal(vm.itemprice1,vm.itemprice2,vm.itemprice3,vm.itemprice41,vm.itemprice42,vm.itemprice51,vm.itemprice52,vm.itemprice53)">
                        calculate</button>
                    </div>
                    <div ng-if="show_save">
                      <div class="form-row">
                        <div class="col col-md-8">
                          <input type="text" class="form-control" placeholder="Total">
                        </div>
                        <div class="col col-md-4">
                          <input type="text" class="form-control align-r" placeholder="Baht" ng-model="gtotal">
                        </div>

                      </div>

                      <div class="col col-md-12">
                        +/- {{diff_ratep}} % = {{gtotal1 | number:0}} - {{gtotal2 | number:0}}
                      </div>


                      <div class="form-group" ng-if="show_btnsave">
                        <button type="submit" class="btn btn-primary marginleft15 " ng-click="save_data(vm.relativename,vm.drname,vm.type,vm.loo,vm.los,vm.ICUlos,vm.ICUprice,vm.wardlos,vm.wardprice
                    ,vm.item1,vm.itemprice1
                    ,vm.item2,vm.itemprice2
                    ,vm.item3,vm.itemprice3
                    ,vm.item41,vm.itemprice41
                    ,vm.item42,vm.itemprice42
                    ,vm.item51,vm.itemprice51
                    ,vm.item52,vm.itemprice52
                    ,vm.item53,vm.itemprice53
                    ,patientname,HN,gender,thaiDOB,age,vm.procedure,code,gtotal,ptuid
                    )">
                          save data</button>
                      </div>

                    </div>
                  </form>

                </md-card-content>
              </md-card>
            </div>
            <!-- page 2 show_print -->
            <div ng-if="p23" flex-xs flex-gt-xs="100" layout="column">
              <!-- box left 1 -->
              <md-card>
                <md-card-content>
                  <div ID='printableArea'>
                    <div>name: {{vm.name}}</div>
                    <div>HN: {{vm.HN}}</div>
                    <div>user name: {{username}}</div>
                    <div>NB: {{vm.NB}}</div>
                    <div>code:{{code}}</div>
                    <div>procedure: {{procedure}}</div>
                    <div>Med&supply: {{vm.mavgmed_sup}}</div>
                    <div>LAB&radio: {{vm.mavglab_radio}}</div>
                    <div>DF: {{vm.mavgdf}}</div>
                    <div>Others: {{vm.mavgothers}}</div>
                    <div>Room: {{vm.mavgroom}}</div>
                    <div>Total: {{vm.mavgmed_sup+vm.mavglab_radio+vm.mavgdf+vm.mavgothers+vm.mavgroom}}</div>
                  </div>
                  <div flex layout="row">

                    <button type="text" class="btn btn-success marginleft15" ng-click="PrintMe()"
                      data-placement="bottom" title="Save data" onmouseenter="$(this).tooltip('show')">
                      <span class="glyphicon glyphicon-print"></span>
                    </button>
                    <button type="text" class="btn btn-success marginleft15" ng-click="closeprint()"
                      data-placement="bottom" title="Save data" onmouseenter="$(this).tooltip('show')">
                      <span class="glyphicon glyphicon-backward"></span>
                    </button>
                  </div>
                </md-card-content>


              </md-card>

            </div>
          </md-content>
        </md-tab>



        <!-- page 7 -->
        <md-tab label="Set up" ng-click="setup()">
          <!-- <md-content class="md-padding" style="height:90vH;"> -->
          <md-content class="md-padding" layout-xs="column" layout="row" style="height:90vH;">
            <!-- page 7 left -->
            <div flex-xs flex-gt-xs="20" layout="column">
              <!-- box left 1 calendar-->
              <md-card>
                <md-card-content>
                  <div class="pad0">
                    <button class="btn btn-basic width15vW" ng-click="setup_user=true" title="">
                      user
                      <!-- <span class="glyphicon glyphicon-save"></span> -->
                    </button>
                  </div>
                  <div class="pad0">
                    <button class="btn btn-basic width15vW" ng-click="setup_dr=true" title="">
                      แพทย์
                      <!-- <span class="glyphicon glyphicon-save"></span> -->
                    </button>
                  </div>
                </md-card-content>
              </md-card>
            </div>
            <!-- page 7 right -->
            <div flex-xs flex-gt-xs="80" layout="column">
              <!-- box left 1 -->
              <md-card>
                <div ng-if="show_savedata" class="align-c fontxxl fontr5"> {{lbl_savedata}}</div>

                <md-card-content>
                  <div ng-if="setup_user">
                    <div flex layout="column" class="form-group">
                      <div class="padtop3 fontbg4">
                        <label>setup user</label>
                      </div>
                      <div class="padleft">
                        <input type="text" name="i1" class="form-control width40vW" placeholder="ชื่อ"
                          ng-model="vm.name" value="vm.name" />
                      </div>
                      <Br>
                      <div class="padleft">
                        <input type="text" name="i1" class="form-control width40vW" placeholder="password"
                          ng-model="vm.password" value="vm.password" />
                      </div>
                      <Br>
                      <div class="padleft">
                        <button class="btn btn-basic width10vW" ng-click="save_user(vm.name,vm.password)" title="">
                          บันทึก
                          <!-- <span class="glyphicon glyphicon-save"></span> -->
                        </button>
                      </div>
                    </div>
                  </div>
                  <div ng-if="setup_dr">
                    <div flex layout="column">
                      <div class="padtop3 fontbg4">
                        <label>setup user</label>
                      </div>
                      <div class="padleft">
                        <input type="text" name="i1" class="form-control width40vW" placeholder="ชื่อ"
                          ng-model="vm.name" value="vm.name" />
                      </div>
                      <Br>
                      <div class="padleft">
                        <input type="text" name="i1" class="form-control width40vW" placeholder="password"
                          ng-model="vm.password" value="vm.password" />
                      </div>
                      <Br>
                      <div class="padleft">
                        <input type="text" name="i1" class="form-control width40vW" placeholder="ใบประกอบโรคศิลป์เลขที่"
                          ng-model="vm.drid" value="vm.drid" />
                      </div>
                      <Br>
                      <div class="padleft">
                        <button class="btn btn-basic width10vW" ng-click="save_dr(vm.name,vm.password,vm.drid)"
                          title="">
                          บันทึก
                          <!-- <span class="glyphicon glyphicon-save"></span> -->
                        </button>
                      </div>
                    </div>
                  </div>
                </md-card-content>

              </md-card>

            </div>
          </md-content>
        </md-tab>
        <!-- page 3 -->
        <md-tab label="xxxxReport" ng-click="report()">
          <!-- <md-content class="md-padding" style="height:90vH;"> -->
          <md-content class="md-padding" layout-xs="column" layout="row" style="height:90vH;">
            <!-- {{show_report}} -->
            <!-- page 5 left -->
            <div flex-xs flex-gt-xs="25" layout="column">
              <!-- box left 1 calendar-->
              <md-card>

                <md-card-content>
                  <md-input-container>
                    <button type="submit" class="btn btn-primary width10vW" ng-click="rep_title()">Title</button>
                    <!-- <button type="submit" class="btn btn-primary width10vW" ng-click="rep_zipcode()">ZipCode</button> -->
                    <!-- <table class="font-1em ">
                              <tr ng-repeat="detail in repusername  | orderBy:'-count'">
                                <td>
        
                                  <button type="text" class="btn btn-info  margintop1 width20vW"
                                    ng-click="showreport(detail._id)" data-placement="bottom" title="showreport(detail._id)"
                                    onmouseenter="$(this).tooltip('show')">
                                    <div>{{detail._id}} ({{detail.count}} CASE)</div>
                                  </button>
        
                                </td>
                              </tr>
                            </table> -->
                  </md-input-container>
                </md-card-content>

              </md-card>

            </div>
            <!-- page 5 right -->
            <div flex-xs flex-gt-xs="75" layout="column">
              <!-- box right 1 -->
              <md-card=>
                <md-card-content>
                  <md-input-container style="width: 100%;">
                    <div flex-xs flex-gt-xs="100" layout="column">
                      <!-- <div flex layout="row"> -->

                      <div flex layout="row" style="justify-content: flex-end;max-height: 50px;">
                        <div>
                          <md-select ng-model="vm.selectedDownload" class=""
                            ng-change="downloadTypeChange(vm.selectedDownload)">
                            <md-option ng-repeat="fileType in vm.downloadSupports" ng-value="fileType"
                              ng-selected="fileType === vm.selectedDownload ? true: false">
                              {{fileType}}
                            </md-option>
                          </md-select>
                        </div>
                        <div>
                          <button class="btn btn-default" id="button1" ng-click="downloadFile(vm.selectedDownload)"
                            style="width: 60px; height: 40px">
                            <img src="../../app/image/download.png" alt="" style="width: 30px" />
                          </button>
                        </div>
                        <div>
                          <button class="btn btn-default" id="button2" ng-click="printFile()"
                            style="width: 60px; height: 40px">
                            <img src="../../app/image/print.png" alt="" style="width: 30px" />
                          </button>
                        </div>
                      </div>

                    </div>
                    <div id="mytable" style="margin-top: 0;min-height: 71vH;max-height:71vH;overflow-y:scroll;">
                    </div>
                  </md-input-container>
                </md-card-content>


                </md-card>

            </div>
          </md-content>
        </md-tab>



        <!-- page 8 -->
        <md-tab label="xxxxDetail" ng-click="bill_detail()">
          <!-- <md-content class="md-padding" style="height:90vH;"> -->
          <md-content class="md-padding" layout-xs="column" layout="row" style="height:90vH;">
            <!-- {{show_report}} -->
            <!-- page  left -->
            <div flex-xs flex-gt-xs="25" layout="column" style="height:75vH;">
              <!-- box left 1 calendar-->
              <md-card>

                <div flex layout="row">
                  <md-content flex layout-padding>
                    <input type="text" name="hn" class="form-control " placeholder="hn" ng-model="mhn" value=" " />
                  </md-content>
                  <md-button class="md-raised md-warn md-hue-3" ng-click="searchptbyhn(mhn)" title="Show"
                    style="width:80px;">
                    search
                  </md-button>

                </div>
                <!-- loading -->

                <div flex layout="column" ng_if="show_loading">
                  <div class="align-c">
                    <img class="square" src="../app/image/loading.gif" style="width:100px">
                    <div class="alert alert-warning">
                      <strong> โปรดรอสักครู่</strong>
                    </div>
                  </div>

                </div>
                <div flex layout="column " ng-if="show_searchpt">
                  <div class="align-l margin15 width20vW ">
                    <div class="fonts fontgr9">HN : {{searchpt.mrn}} </div>
                    <div class="fontn fontr8">Name:
                      <font color="blue " class="fontn ">{{searchpt.firstname}} {{searchpt.lastname}}</font>
                    </div>
                    <div class="fonts fontgr8">DOB : {{searchpt.dateofbirth | date:'dd/MM/yyyy'}}</div>
                    <div class="fonts fontgr7"> Age : {{getAge(searchpt.dateofbirth)}}</div>
                  </div>
                </div>

                <md-input-container class="input-fields    marginleft2">
                  <div style="min-height: 50vH;max-height:50vH;overflow-y:scroll;">
                    <table class="table">
                      <tr ng-repeat="detail in ptvisit | orderBy : '-startdate'">
                        <!-- <td class="align-l">{{detail.catname}}</td> -->
                        <td class="align-c">
                          <button type="text" class="btn btn-primary width20vW" ng-click="showbilldetail(detail.ptvuid)"
                            data-placement="bottom">
                            {{detail.startdate | date:'dd/MM/yyyy'}}<Br>
                            {{detail.visitid}}
                          </button>
                        </td>
                      </tr>
                    </table>
                  </div>
                </md-input-container>
              </md-card>

            </div>

            <!-- page  right -->
            <div flex-xs flex-gt-xs="75" layout="column">
              <!-- box right 1 -->
              <md-card ng-if="show_header" style="min-height: 14vH;max-height:14vH;">
                <md-card-content>
                  <!-- <md-input-container style="width: 100%;"> -->

                  <!-- <div style="min-height: 10vH;max-height:10vH;overflow-y:scroll;"> -->
                  <div flex layout="row ">
                    <md-content flex layout-padding class="width15vW ">
                      Date:
                      <select name="repeatSelect1" class="form-control" id="repeatSelect1" ng-model="xx.chargedate"
                        ng-change="billbydate(xx.chargedate)">
                        <option ng-repeat="xx in bill2 | orderBy : '-cdate'" ng-value="xx.chargedate">
                          {{xx.chargedate}}</option>
                      </select>
                      <input type="text" class="form-control" name="endate" placeholder="date" value="xx.endate"
                        ng-hide="true" required />
                    </md-content>
                    <md-content flex layout-padding class=" width30vW">
                      Orderitem name:
                      <select name="repeatSelect2" class="form-control" id="repeatSelect2" ng-model="yy.orderitemname"
                        ng-change="billbyitem(yy.orderitemname)">
                        <option ng-repeat="yy in bill3  | orderBy : 'orderitemname'" ng-value="yy.orderitemname">
                          {{yy.orderitemname}}</option>
                      </select>
                      <input type="text" class="form-control" name="orderitemname" placeholder="orderitemname"
                        value="yy.orderitemname" ng-hide="true" required />
                    </md-content>
                    <div class="align-c margin5 ">
                      <button class="btn btn-success width10vW" ng-click="billsum()" title="sum by date">
                        sum by date
                      </button>
                    </div>
                    <div class="align-c margin5 ">
                      <button class="btn btn-success width10vW" ng-click="billall()" title="reset">
                        show all
                      </button>
                    </div>
                    <div class="align-c margin5 ">
                      <button class="btn btn-info width10vW"
                        ng-click="JSONToCSVConvertor(billshow, 'report chargecode', true)" title="reset">
                        save2xls
                      </button>
                    </div>
                    <div class="align-c margin5 ">
                      <button class="btn btn-default width10vW" ng-click="Printdetail()" title="reset">
                        print detail
                      </button>
                    </div>
                  </div>
                  <!-- </md-input-container> -->
                </md-card-content>


              </md-card>
              <!-- box right 2 -->
              <md-card ng-if="show_billdetail">
                <md-card-content>
                  <md-input-container style="width: 100%;">
                    <div class="marginleft15"></div>
                    <div style="min-height: 65vH;max-height:65vH;overflow-y:scroll;">
                      <div ID='print_detail'>
                        <table class="table table-striped table-condensed table-hover fontsn ">
                          <tr>
                            <th class="align-l">No.</th>
                            <th class="align-l">date</th>
                            <th class="align-l">order name</th>
                            <th class="align-l">amount</th>
                            <th class="align-r">unitprice</th>
                            <th class="align-r">discount</th>
                            <th class="align-r">net</th>

                          </tr>
                          <tr ng-repeat="detail in billshow | orderBy:[ '-cdate','orderitemname' ] ">
                            <!-- | orderBy : 'chargecodes.modifiedat' -->
                            <!-- <td class="align-l">{{detail.catname}}</td> -->
                            <td class="align-l">{{ $index + 1 }}</td>
                            <td class="align-l">{{detail.chargedate | date:'dd/MM/yyyy hh:mm'}}</td>
                            <td class="align-l">{{detail.orderitemname}}</td>
                            <td class="align-r">{{detail.quantity | number:2}}</td>
                            <td class="align-r">{{detail.unitprice | number:2}}</td>
                            <td class="align-r">{{detail.payordiscount | number:2}}</td>
                            <td class="align-r">{{detail.netamount | number:2}}</td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </md-input-container>
                </md-card-content>


              </md-card>
              <md-card ng-if="show_billsum">
                <md-card-content>
                  <md-input-container style="width: 100%;">
                    <div class="align-c margin5 ">
                      <button class="btn btn-default width10vW" ng-click="Printsum()" title="reset">
                        print sum of day
                      </button>
                    </div>

                    <div style="min-height: 65vH;max-height:65vH;overflow-y:scroll;">
                      <div ID='print_sum'>
                        <table class="table table-striped table-condensed table-hover fontsn ">
                          <tr>
                            <th class="align-l">No.</th>
                            <th class="align-l">date</th>

                            <th class="align-r">total</th>

                          </tr>
                          <tr ng-repeat="detail in billsumbydate | orderBy : 'cdate'">

                            <td class="align-l">{{ $index + 1 }}</td>
                            <td class="align-l">{{detail.cdate | date:'dd/MM/yyyy'}}</td>

                            <td class="align-r">{{detail.netamount | number:2}}</td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </md-input-container>
                </md-card-content>


              </md-card>
            </div>

          </md-content>
        </md-tab>
        <!-- page last -->
        <md-tab label="HOME" ng-click="gohome()">

          <md-content class="md-padding" layout-xs="column" layout="row" style="height:90vH;">

          </md-content>
        </md-tab>
      </md-tabs>
    </md-content>
  </div>

</form>